---
title: "Week2321"
date: 2023-05-22T20:36:06+08:00
draft: true
---

+ 《Code Complete》 Ch9 PPP (Psuedocode Programming Process)

现学现用，用在了一个临时任务上。POI 数据库中很多记录缺少 house number, 这部分数据在 2B 项目中被拒绝。所以尝试从已知的 house no 中推测未知的 house no, 调研可行性。编程实现中有些较复杂的逻辑，借助 PPP 增进了对逻辑的把握，感到花在 debug 的时间比预期有所减少。

+ PostgreSQL

这周安装上手。明白了为什么一方面说 PostgreSQL 相比 MySQL 以几何相关计算见长，另一方面却在《PostgreSQL 开发指南》一书中未见提及。原因在于[1]， PostgreSQL 的几何计算能力是由 PostGIS 以扩展方式提供的，而非内置。若去读 PostGIS 文档，便会有很丰富的内容介绍，其中还有一个不错的 workshop.

使用中还发现有意思的一点：从 SQL 执行的错误提示，可以看出 PostGIS 是否被启用了，也能看出它在执行函数时一定做了类型检查，因为错误信息会告知参数类型不匹配。感到有意思是在于， PostgreSQL 与 PostGIS 是以什么方式协同工作的？像这样的软件，其设计与实现会是怎样的？

+ Bits idea

最近用 SQL 多一些， MySQL/ PostgreSQL/ Presto, 越发觉得有点像是在集中编程语言间切换。编程语言若从程序控制流程、变量、表达式等构成上看，都大致遵循一套体系，但从具体语言特性、语法上，由各有差异。前述几种数据库或引擎，在常见的 SQL 表达上大体类似，而论到一些具体功能特性、函数等，就存在差异，也有的具备其他数据库或引擎不具备的能力，如 Presto 支持 lambda 表达式，PostgreSQL 在集合运算方面很犀利， MySQL 能通过 `JSON_EXTRACT（col_name, '$[*].property_name）` 直接从 JSON 数组中抽取每个元素的特定属性，这又是另外两者不具备的。

无论哪一种 SQL, 共同之处是：都很强大。善用之，可以显著提高工作效率。这是最近才强烈体会到的。比如以前的数据处理，都是用程序扫描数据，再根据业务拼接组成想要的数据结构。其实很多时候，直接用 SQL 就能替代程序扫表完成数据预处理了。也可以说是专业的事交给专业的工具，减少不必要的劳动。

总结起来就是：开卷有益，抽象有益，善用工具。


## Appendix

[1]: 以下为书写过程中 Copilot 生成的文字：

因为 PostgreSQL 的几何计算是通过扩展实现的，而且是以 C 语言编写的，所以在 SQL 中使用时，只是调用函数，不需要了解具体实现。而 MySQL 的几何计算是直接在 SQL 中实现的，所以需要了解具体实现。这也是为什么 MySQL 的几何计算功能比 PostgreSQL 更弱的原因。

PostGIS 与 MySQL 的几何计算功能相比，有两个优势。一是 PostGIS 支持的几何类型更多，比如三维几何类型，还有地理坐标系的支持。二是 PostGIS 支持的几何计算更多，比如计算两个几何对象的交集、并集、差集等。MySQL 只支持计算两个几何对象的距离。
